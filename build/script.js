!function(){"use strict";var e=window.wp.element;const{createHigherOrderComponent:t}=wp.compose,{Fragment:o,useEffect:n,useState:a,useRef:c}=wp.element,{InspectorControls:s}=wp.blockEditor,{PanelBody:r,ToggleControl:l,PanelRow:i,TextControl:d,SelectControl:p}=wp.components,{isURL:u}=wp.url;wp.hooks.addFilter("blocks.registerBlockType","ubc/extension/text-from-cf/button/add-attributes",(function(e,t){return"core/button"!==t?e:{...e,attributes:{...e.attributes,CFToText_enable:{type:"boolean",default:!1},CFToText_key:{type:"string",default:""}},usesContext:["postId"]}}));const m=t((t=>c=>{const{name:i,attributes:d,setAttributes:u,context:m}=c,{CFToText_enable:_,CFToText_key:x}=d,{postId:b}=m,[f,w]=a([]);if("core/button"!==i)return(0,e.createElement)(t,{...c});n((()=>{(async()=>{const e=new FormData;e.append("action","wp_text_from_cf_get_meta_keys"),e.append("nonce",wp_text_from_cf.nonce);const t=await fetch(ajaxurl,{method:"POST",credentials:"same-origin",body:e}),o=await t.json();o.success&&w(o.data)})()}),[]),n((()=>{!1!==_&&T()}),[x,_]);const T=async()=>{const e=new FormData;e.append("action","text_to_cf_get_custom_field_value"),e.append("meta_key",x),e.append("post_id",b),e.append("nonce",wp_text_from_cf.nonce);const t=await fetch(ajaxurl,{method:"POST",credentials:"same-origin",body:e}),o=await t.json();!1!==o.success&&u({text:o.data})};return(0,e.createElement)(o,null,(0,e.createElement)(t,{...c}),(0,e.createElement)(s,null,(0,e.createElement)(r,{title:"Text Settings",initialOpen:!0},(0,e.createElement)(l,{label:"Enable text to custom field",checked:_,onChange:()=>{u({CFToText_enable:!_})}}),_?(0,e.createElement)(p,{label:"Text to Custom Field",value:x,options:f.map((e=>({label:e,value:e}))),onChange:e=>{u({CFToText_key:e})},__nextHasNoMarginBottom:!0}):"")))}),"withInspectorControl");wp.hooks.addFilter("editor.BlockEdit","ubc/extension/text-from-cf/button/add-controls",m)}();